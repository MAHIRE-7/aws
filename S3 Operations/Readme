# ğŸš€ S3 to S3 Cross-Account Data Transfer (Production Approach)

This document explains how to securely transfer data between **Amazon S3 buckets in different AWS accounts** using **IAM Roles**, without making buckets public or sharing access keys.

---

## ğŸ“Œ Problem Statement

- Source S3 bucket exists in **Account A**
- Destination S3 bucket exists in **Account B**
- Data must be transferred **securely**
- âŒ No public access
- âŒ No hardcoded credentials

---

## ğŸ§  Core Concept (Very Important)

> **Cross-account S3 access is achieved using IAM Roles + STS AssumeRole.**

S3 buckets never trust users directly â€” they trust **IAM identities**.

---

## ğŸ—ï¸ Architecture Diagram (Single View)
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚     Account A            â”‚
    â”‚  Source S3 Bucket        â”‚
    â”‚  EC2 / Jenkins / EKS     â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                â”‚
                â”‚  sts:AssumeRole
                â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚     Account B            â”‚
    â”‚  IAM Role (S3 Access)    â”‚
    â”‚  Destination S3 Bucket  â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    
---

## ğŸ” End-to-End Flow

---

## âœ… Method Used (Recommended & Interview-Friendly)

### **IAM Role + aws s3 sync**

Best for:
- One-time transfer
- Jenkins pipelines
- EC2 / EKS workloads
- Controlled & auditable access

---

## ğŸ”§ Implementation Steps

### 1ï¸âƒ£ Account B: Create IAM Role
- Trusted entity: **Another AWS Account**
- Trusted account ID: **Account A**

**Trust Policy**
```json
{
  "Version": "2012-10-17",
  "Statement": [
    {
      "Effect": "Allow",
      "Principal": {
        "AWS": "arn:aws:iam::<ACCOUNT_A_ID>:root"
      },
      "Action": "sts:AssumeRole"
    }
  ]
}
{
  "Effect": "Allow",
  "Action": [
    "s3:PutObject",
    "s3:GetObject",
    "s3:ListBucket"
  ],
  "Resource": [
    "arn:aws:s3:::destination-bucket",
    "arn:aws:s3:::destination-bucket/*"
  ]
}

Account A: Assume the role
aws sts assume-role \
  --role-arn arn:aws:iam::<ACCOUNT_B_ID>:role/S3TransferRole \
  --role-session-name s3-transfer

Transfer Data
aws s3 sync s3://source-bucket s3://destination-bucket